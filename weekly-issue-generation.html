<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Weekly Issue Generator (ScriptRunner · Jira Cloud)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background: #fafafa;
      color: #222;
    }
    header, main {
      max-width: 900px;
      margin: 0 auto;
      padding: 1.5rem 1rem 2rem;
    }
    nav a {
      text-decoration: none;
      color: #2563eb;
      font-weight: 500;
    }
    h1, h2, h3 {
      color: #111827;
    }
    section {
      background: #ffffff;
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1.25rem;
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.08);
    }
    code {
      background: #f3f4f6;
      padding: 0.1rem 0.25rem;
      border-radius: 4px;
      font-size: 0.95em;
    }
    pre {
      background: #0b1120;
      color: #e5e7eb;
      padding: 1rem;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 0.9em;
    }
    ul {
      padding-left: 1.2rem;
    }
    .meta p {
      margin: 0.15rem 0;
    }
    .tag {
      display: inline-block;
      font-size: 0.8rem;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
      margin-right: 0.35rem;
      margin-top: 0.25rem;
    }
    .small-note {
      font-size: 0.85rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <a href="index.html">← Home</a>
    </nav>
  </header>

  <main>
    <section id="weekly-issue-generator">
      <h1>Weekly Issue Generator</h1>

      <div class="meta">
        <p><strong>Language:</strong> Groovy (ScriptRunner for Jira Cloud)</p>
        <p><strong>Difficulty:</strong> Easy</p>
        <p>
          <span class="tag">Jira Cloud REST API</span>
          <span class="tag">ScriptRunner</span>
          <span class="tag">Automation</span>
          <span class="tag">Scheduled Jobs</span>
          <span class="tag">Portfolio Demo</span>
        </p>
      </div>

      <hr>

      <h2>Description</h2>
      <p>
        This ScriptRunner scheduled job automatically creates a Jira issue in a target project on a recurring schedule.
        It is a small, self-contained example of how to use Groovy + ScriptRunner to call Jira Cloud REST APIs,
        generate dynamic content, and leave a clear, timestamped trace of every automation run.
      </p>
      <p>
        The script runs entirely inside Jira Cloud (ScriptRunner for Jira), using the
        <code>/rest/api/3/issue</code> endpoint, and updates the issue description with a rich-text
        Atlassian Document Format (ADF) payload that also points back to this public portfolio page.
      </p>

      <h2>Structure</h2>
      <ol>
        <li>
          <strong>Configuration section</strong><br>
          Defines the target Jira project (<code>projectKey</code>) and issue type
          (<code>issueTypeName</code>). This makes it easy to repoint the job to a different project
          without changing the logic.
        </li>
        <li>
          <strong>Dynamic content generation</strong><br>
          Uses the current date and time to build a unique, timestamped issue summary
          (for example, <code>"Issue created with ScriptRunner - 2025-12-09 16:00"</code>).
          Generates a multi-line description explaining that the issue was created automatically and
          includes a link back to this portfolio page.
        </li>
        <li>
          <strong>Payload construction</strong><br>
          Builds a Groovy <code>Map</code> called <code>payload</code>, which represents the JSON body sent to the
          Jira Cloud REST API. The <code>description</code> field is built using Atlassian Document Format (ADF)
          so it renders correctly in Jira Cloud.
        </li>
        <li>
          <strong>REST API call</strong><br>
          Uses ScriptRunner’s <code>post("/rest/api/3/issue")</code> helper to create the issue.
          The payload includes the project key, issue type, summary, and ADF description.
        </li>
        <li>
          <strong>Logging &amp; error handling</strong><br>
          After the REST call:
          <ul>
            <li>If the status is <code>201</code>, the script logs a success message with the created issue key.</li>
            <li>Otherwise, it logs a warning with the HTTP status code and the response body to help diagnose errors.</li>
          </ul>
        </li>
      </ol>

      <h2>Key Variables</h2>
      <ul>
        <li>
          <code>projectKey</code> –
          Jira project key where the issue is created
          (for example, an Automation Showcase project like <code>"AS"</code>).
        </li>
        <li>
          <code>issueTypeName</code> –
          Name of the issue type to create (e.g., <code>"Task"</code>, <code>"Story"</code>).
        </li>
        <li>
          <code>now</code> / <code>nowStr</code> –
          Current date and time. <code>nowStr</code> is formatted as
          <code>"yyyy-MM-dd HH:mm"</code> and included in the summary so each run is clearly timestamped.
        </li>
        <li>
          <code>summary</code> –
          Human-readable issue summary including the timestamp
          (for example, <code>"Issue created with ScriptRunner - 2025-12-09 16:00"</code>).
        </li>
        <li>
          <code>descriptionText</code> –
          Multi-line plain-text description that:
          <ul>
            <li>Explains that the issue was generated automatically by ScriptRunner.</li>
            <li>Mentions the purpose of the automation.</li>
            <li>Includes a link back to this portfolio page.</li>
          </ul>
        </li>
        <li>
          <code>payload</code> –
          Groovy map that represents the JSON body sent to Jira Cloud’s
          <code>/rest/api/3/issue</code> endpoint, including:
          <ul>
            <li><code>project</code> (key)</li>
            <li><code>summary</code></li>
            <li><code>issuetype</code></li>
            <li><code>description</code> (ADF structure)</li>
          </ul>
        </li>
      </ul>

      <h2>How It Runs (ScriptRunner Scheduled Job)</h2>
      <p>
        This script is configured as a <strong>ScriptRunner scheduled job</strong> in Jira Cloud. The schedule can be:
      </p>
      <ul>
        <li>Daily</li>
        <li>Weekly</li>
        <li>Any custom cron expression supported by ScriptRunner</li>
      </ul>
      <p>
        Each time the job runs:
      </p>
      <ul>
        <li>ScriptRunner triggers the Groovy script according to the schedule.</li>
        <li>The script builds a new payload with the current timestamp.</li>
        <li>Jira Cloud receives a new issue via <code>/rest/api/3/issue</code>.</li>
        <li>ScriptRunner logs whether the run succeeded or failed.</li>
      </ul>

      <h2>Results</h2>
      <ul>
        <li>Automatically generates a new Jira issue on the configured schedule without manual intervention.</li>
        <li>Leaves a clear, timestamped history of when the automation ran.</li>
        <li>Provides a simple, auditable example of ScriptRunner + Jira Cloud REST integration.</li>
        <li>
          Demonstrates:
          <ul>
            <li>How to call Jira Cloud REST APIs from ScriptRunner Groovy.</li>
            <li>How to build Atlassian Document Format (ADF) payloads in code.</li>
            <li>Basic logging and error handling inside ScriptRunner jobs.</li>
          </ul>
        </li>
      </ul>

      <h2>Example Issue</h2>
      <p>
        This job is currently configured to create demo issues in my Jira Cloud Automation Showcase project.
        Here is an example of a generated issue:
      </p>
      <p>
        <a href="https://elvaramosglz.atlassian.net/browse/AS-2" target="_blank" rel="noopener">
          View example Jira issue (AS-2) →
        </a>
      </p>
      <p class="small-note">
        (Access depends on Jira permissions; this link is mainly included as documentation for the portfolio.)
      </p>
    </section>
  </main>
</body>
</html>
